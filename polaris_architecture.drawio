<mxfile host="drawio-plugin" modified="2025-12-21T10:30:00.000Z" agent="Antigravity" etag="v3" version="22.1.22" type="embed" pages="1">
  <diagram id="polaris_detail" name="Polaris Architecture">
    <mxGraphModel dx="1200" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Setup Workflow Swimlane -->
        <mxCell id="p1" value="Polaris Initialization Workflow (docker-compose setup)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="40" y="40" width="820" height="400" as="geometry" />
        </mxCell>
        
        <!-- Step 1: Postgres -->
        <mxCell id="s1" value="1. PostgreSQL&#xa;(DB Ready)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="p1">
          <mxGeometry x="40" y="160" width="100" height="80" as="geometry" />
        </mxCell>
        
        <!-- Step 2: Bootstrap -->
        <mxCell id="s2" value="2. Bootstrap&#xa;(Initialize DB)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="p1">
          <mxGeometry x="180" y="170" width="120" height="60" as="geometry" />
        </mxCell>
        
        <!-- Step 3: Polaris Server -->
        <mxCell id="s3" value="3. Polaris API&#xa;(Start Server)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="p1">
          <mxGeometry x="340" y="170" width="120" height="60" as="geometry" />
        </mxCell>
        
        <!-- Step 4: Setup Script -->
        <mxCell id="s4" value="4. Polaris Setup&#xa;(Configure RBAC &amp; Tables)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="p1">
          <mxGeometry x="500" y="170" width="120" height="60" as="geometry" />
        </mxCell>
        
        <!-- Connections inside swimlane -->
        <mxCell id="ep1" value="Prepare" style="endArrow=classic;html=1;" edge="1" parent="p1" source="s1" target="s2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ep2" value="Connect" style="endArrow=classic;html=1;" edge="1" parent="p1" source="s2" target="s3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ep3" value="Configure via REST" style="endArrow=classic;html=1;" edge="1" parent="p1" source="s3" target="s4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Outcome: Ready Table -->
        <mxCell id="res1" value="Ready Catalog&#xa;(lakehouse.raw_messages)" style="shape=folder;fontStyle=1;spacingTop=10;tabWidth=40;tabHeight=14;tabPosition=left;html=1;fillColor=#ffffff;strokeColor=#000000;" vertex="1" parent="p1">
          <mxGeometry x="660" y="150" width="140" height="90" as="geometry" />
        </mxCell>
        <mxCell id="ep4" value="Creates" style="endArrow=classic;html=1;" edge="1" parent="p1" source="s4" target="res1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Consumers Swimlane -->
        <mxCell id="p2" value="Polaris Consumers (Data &amp; Metadata Flow)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="40" y="480" width="820" height="200" as="geometry" />
        </mxCell>
        
        <mxCell id="c1" value="Flink&#xa;(Iceberg Sink)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="p2">
          <mxGeometry x="100" y="80" width="120" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="c2" value="ClickHouse&#xa;(Analytics Engine)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="p2">
          <mxGeometry x="340" y="80" width="120" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="c3" value="MinIO&#xa;(Parquet Storage)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="p2">
          <mxGeometry x="580" y="60" width="100" height="80" as="geometry" />
        </mxCell>
        
        <!-- Cross-swimlane connections -->
        <mxCell id="ecp1" value="Register Metadata&#xa;(REST API)" style="endArrow=classic;html=1;dashed=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.25;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="c1" target="s3">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="160" y="560" as="sourcePoint" />
            <mxPoint x="370" y="440" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ecp2" value="Read Metadata&#xa;(REST API)" style="endArrow=classic;html=1;dashed=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.75;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="c2" target="s3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ecp3" value="Write Parquet" style="endArrow=classic;html=1;" edge="1" parent="1" source="c1" target="c3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ecp4" value="Read Parquet" style="endArrow=classic;html=1;" edge="1" parent="1" source="c2" target="c3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
